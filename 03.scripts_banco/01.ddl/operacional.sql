USE Mais_Transporte

CREATE TABLE TB_PASSAGEIRO (
  ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
  NOME VARCHAR(50) NOT NULL,
  EMAIL VARCHAR(50) NOT NULL,
  CPF VARCHAR(15) NOT NULL UNIQUE,
  DATA_NASCIMENTO DATETIME NOT NULL,
  TELEFONE VARCHAR(15) NOT NULL
)

CREATE INDEX IX_CPF ON TB_PASSAGEIRO (CPF)
CREATE INDEX IX_NOME ON TB_PASSAGEIRO (NOME)

INSERT INTO TB_PASSAGEIRO
VALUES('ROSEANE', 'roseane@gmail.com', '45678198712', '19970901', '997543216'),
	  ('PEDRO', 'pedro@hotmail.com', '36128971523', '19650701', '999765432'),
	  ('MARCOS', 'marcos@gmail.com', '00176523489', '20000113', '998653219'),
	  ('ANGELA', 'angela@hotmail.com', '00100234578', '19970301', '996543217'),
	  ('GABRIEL', 'gabriel@gmail.com', '09876543219', '19920815', '998700122'),
	  ('RODRIGO', 'rodrigo@hotmail.com', '98735609121', '19970307', '999461978'),
	  ('HELENA', 'helena@gmail.com', '56797215808', '19880612', '981234567')

SELECT * FROM TB_PASSAGEIRO

CREATE TABLE TB_MOTORISTA (
  ID_PASSAGEIRO INT NOT NULL PRIMARY KEY,
  COD_MOTORISTA INT NOT NULL,
  NUMERO_DOCUMENTO VARCHAR(15) NOT NULL,
  DATA_EMISSAO DATETIME NOT NULL,
  EXPEDIDOR VARCHAR(5) NOT NULL,
  ESTADO VARCHAR(2) NOT NULL,
  DATA_VALIDACAO DATETIME NOT NULL,
  STATUS VARCHAR(15) NOT NULL CHECK(STATUS IN ('SOLICITADO', 'ATIVO', 'INATIVO')),
  CONSTRAINT FK_MOTORISTA_PASSAGEIRO FOREIGN KEY (ID_PASSAGEIRO) REFERENCES TB_PASSAGEIRO (ID)
)

CREATE INDEX IX_MOTORISTA_PASSAGEIRO ON TB_MOTORISTA(ID_PASSAGEIRO)

INSERT INTO TB_MOTORISTA
VALUES(1, 1, '76589012356', '20100801', 'SSP', 'SE', '20110301', 'ATIVO'),
	  (2, 2, '89645609812', '20170610', 'SSP', 'SE', '20180803', 'ATIVO'),
	  (3, 3, '54318900467', '20200703', 'SSP', 'SE', '20210706', 'ATIVO'),
	  (4, 4, '34698712490', '20210801', 'SSP', 'SE', '20210904', 'ATIVO'),
	  (5, 5, '69124608612', '20200910', 'SSP', 'SE', '20201008', 'ATIVO'),
	  (6, 6, '90856427819', '20191107', 'SSP', 'SE', '20200106', 'ATIVO'),
	  (7, 7, '85496113407', '20170620', 'SSP', 'SE', '20171016', 'ATIVO')

SELECT * FROM TB_MOTORISTA

CREATE TABLE TB_VEICULO (
  ID INT NOT NULL PRIMARY KEY,
  RENAVAM VARCHAR(15) NOT NULL UNIQUE,
  PLACA VARCHAR(10) NOT NULL,
  DATA_EMISSAO DATETIME NOT NULL,
  EXPEDIDOR VARCHAR(5) NOT NULL,
  ESTADO VARCHAR(2) NOT NULL,
  ID_MOTORISTA_PASSAGEIRO INT NOT NULL,
  CONSTRAINT FK_MOTORISTA_VEICULO FOREIGN KEY (ID_MOTORISTA_PASSAGEIRO) REFERENCES TB_MOTORISTA (ID_PASSAGEIRO)
) 

CREATE INDEX IX_VEICULO_MOTORISTA ON TB_VEICULO (ID_MOTORISTA_PASSAGEIRO)
CREATE INDEX IX_PLACA ON TB_VEICULO (PLACA)

INSERT INTO TB_VEICULO
VALUES(1, '23487965012', 'ABC345', '20010901', 'SSP', 'SE', 1),
	  (2, '73887561098', 'DF456Q', '20100702', 'SSP', 'SE', 2),
	  (3, '53772941013', 'WFD43A', '20200705', 'SSP', 'SE', 3),
	  (4, '65487690123', 'BTN781', '20200801', 'SSP', 'SE', 4),
	  (5, '45781290127', 'DFU891', '20190802', 'SSP', 'SE', 5),
	  (6, '79145309167', 'GHJ123', '20180810', 'SSP', 'SE', 6),
	  (7, '74329087134', 'SQW801', '20170611', 'SSP', 'SE', 7)

SELECT * FROM TB_VEICULO

CREATE TABLE TB_VIAGEM (
  ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
  TITULO VARCHAR(50) NOT NULL,
  LOCAL_ORIGEM VARCHAR(50) NOT NULL,
  LOCAL_DESTINO VARCHAR(50) NOT NULL,
  VALOR_PASSAGEM NUMERIC(10,2) NOT NULL,
  TOTAL_VAGAS INT NOT NULL,
  DATA_PARTIDA DATETIME NOT NULL,
  DATA_CHEGADA DATETIME NOT NULL,
  DATA_DISPONIVEL DATE NOT NULL,
  DESCRICAO VARCHAR(100) NOT NULL,
  STATUS VARCHAR(15) NOT NULL CHECK(STATUS IN ('DISPONIVEL', 'CONFIRMADA', 'CONCLUIDA', 'CANCELADA')), 
  COD_MOTORISTA INT NOT NULL
)

CREATE INDEX IX_LOCAL_DESTINO ON TB_VIAGEM (LOCAL_DESTINO)

SELECT * FROM TB_VIAGEM


